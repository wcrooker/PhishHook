{{ define "base" }}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="PhishHook - Phishing Toolkit">
    <meta name="author" content="Jordan Wright (http://github.com/jordan-wright)">
    <link rel="shortcut icon" href="/images/favicon.ico">

    <title>PhishHook - {{ .Title }}</title>

    <link href="/css/dist/gophish.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,600,700' rel='stylesheet' type='text/css'>
</head>

<body>
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <img class="navbar-logo" src="/images/logo_inv_small.png" />
                <a class="navbar-brand" href="/">&nbsp;PhishHook</a>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <button type="button" class="theme-toggle" id="theme-toggle" title="Toggle dark mode">
                            <i class="fa fa-moon-o" id="theme-icon"></i>
                            <span id="theme-text">Dark</span>
                        </button>
                    </li>
                    <li>
                        <a id="login-button" href="/login">
                            <button type="button" class="btn btn-primary">Login</button>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container">
        <form class="form-signin" action="" method="POST">
            <img id="logo" src="/images/logo_purple.png" />
            <h2 class="form-signin-heading">Please sign in</h2>
            {{template "flashes" .Flashes}}
            <input type="text" name="username" class="form-control top-input" placeholder="Username" required autofocus>
            <input type="password" name="password" class="form-control bottom-input" placeholder="Password" autocomplete="off" required>
            <input type="hidden" name="csrf_token" value="{{.Token}}" />
            <button class="btn btn-lg btn-primary btn-block" type="submit">Sign in</button>
        </form>
    </div>
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/js/dist/vendor.min.js"></script>
    <script>
        // Theme toggle for login page
        (function() {
            var themeToggle = document.getElementById('theme-toggle');
            var themeIcon = document.getElementById('theme-icon');
            var themeText = document.getElementById('theme-text');
            
            if (!themeToggle) return;
            
            var savedTheme = localStorage.getItem('phishhook-theme');
            var systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            var currentTheme;
            
            if (savedTheme) {
                currentTheme = savedTheme;
            } else {
                currentTheme = systemPrefersDark ? 'dark' : 'light';
            }
            
            applyTheme(currentTheme);
            
            themeToggle.addEventListener('click', function() {
                var newTheme = currentTheme === 'light' ? 'dark' : 'light';
                currentTheme = newTheme;
                applyTheme(newTheme);
                localStorage.setItem('phishhook-theme', newTheme);
            });
            
            function applyTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                updateThemeButtonDisplay(theme);
            }
            
            function updateThemeButtonDisplay(theme) {
                if (!themeIcon || !themeText) return;
                if (theme === 'dark') {
                    themeIcon.className = 'fa fa-sun-o';
                    themeText.textContent = 'Light';
                } else {
                    themeIcon.className = 'fa fa-moon-o';
                    themeText.textContent = 'Dark';
                }
            }
        })();
    </script>
</body>

</html>
{{ end }}